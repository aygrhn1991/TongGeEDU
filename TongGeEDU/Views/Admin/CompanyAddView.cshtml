
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>CompanyAddView</title>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    <link href="~/Extensions/Plugins/css/font-awesome.css" rel="stylesheet" />
    <link href="~/Extensions/Plugins/css/animate.css" rel="stylesheet" />
    <link href="~/Extensions/Plugins/css/style.css" rel="stylesheet" />
</head>
<body class="gray-bg">
    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="row">
            <div class="col-sm-8 col-sm-offset-2">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>添加广告</h5>
                    </div>
                    <div class="ibox-content">
                        <form class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">图片：</label>
                                <div class="col-sm-8">
                                    <input id="file" type="file" accept="image/*" class="form-control">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">URL：</label>
                                <div class="col-sm-8">
                                    <input id="url" type="text" placeholder="URL" class="form-control">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-offset-3 col-sm-8">
                                    <a class="btn btn-sm btn-primary" onclick="add()">添 加</a>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="~/Scripts/jquery-2.2.4.js"></script>
    <script>
        function add() {
            if ($('#url').val() == null || $('#url').val() == '') {
                alert('URL不能为空');
                return;
            }
            var formData = new FormData();
            formData.append('file', $('#file')[0].files[0]);
            formData.append('url', $('#url').val());
            $.ajax({
                url: '/Admin/Company_Add',
                type: 'POST',
                data: formData,
                // 告诉jQuery不要去处理发送的数据
                processData: false,
                // 告诉jQuery不要去设置Content-Type请求头
                contentType: false,
                success: function (d) {
                    if (d == true) {
                        alert('添加成功');
                        $('#url').val('');
                        $('#file').val('')
                    } else {
                        alert('http错误');
                    }
                },
            });
        }
    </script>
</body>
</html>
